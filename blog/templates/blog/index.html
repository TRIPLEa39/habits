{% extends "blog/layout.html" %}
{% block content %}
  <div class="container mt-4" style="max-width: 800px;">
    {% for post in posts %}
      <article class="card mb-4 shadow-sm bg-body-tertiary">
        <div class="card-body d-flex align-items-start">
          <!-- Author image -->
          <img class="rounded-circle me-3 article-img"
               src="{{ post.author.profile.image.url }}"
               alt="{{ post.author }}"
               style="width:48px; height:48px; object-fit:cover;">

          <!-- Post content -->
          <div class="flex-grow-1">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <a class="fw-bold text-primary me-2"
                 href="#">
                {{ post.author }}
              </a>
              <small class="text-muted">
                {{ post.date_posted|date:"F d, Y" }}
              </small>
            </div>

            <h2 class="h5 mb-2">
              <a class="text-decoration-none text-dark"
                 href="#">
                {{ post.title }}
              </a>
            </h2>
            <div class="p-3 border rounded bg-light">
              <p class="mb-0 text-secondary">
                {{ post.content }}
              </p>
            </div>
          </div>
        </div>
      </article>
    {% empty %}
      <p class="text-muted">No posts yet.</p>
    {% endfor %}
    {% if is_paginated %}
      {% if page_obj.has_previous %}
        <a class="ml-2 btn btn-outline-primary" href="?page=1">First Page</a>
        <a class="ml-2 btn btn-outline-primary" href="?page={{ page_obj.previous_page_number }}"> Pervious Page</a>
      {% endif %}
      {% for num in page_obj.paginator.num_range %}
        {% if page_obj.number == num %}
          <a class="ml-2 btn btn-outline-primary" href="?page={{ num }}">{{ num }}</a>
        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
          <a class="ml-2 btn btn-outline-primary" href="?page={{ num }}">{{ num }}</a>
        {%endif%}
      {% endfor %}
      {% if page_obj.has_next %}
        <a class="ml-2 btn btn-outline-primary" href="?page={{ page_obj.next_page_number }}">First Page</a>
        <a class="ml-2 btn btn-outline-primary" href="?page={{ page_obj.paginator.num_pages }}">Next Page</a>
      {% endif %}
    {% endif %}
  </div>

{% endblock content %}